<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ular Tangga</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(135deg,#2ecc71,#27ae60);
  display:flex;
  justify-content:center;
  padding:20px;
}

.container{
  background:#1e8449;
  border-radius:16px;
  padding:16px;
  width:360px;
  box-shadow:0 10px 30px rgba(0,0,0,.3);
}

h1{
  color:white;
  text-align:center;
  margin-bottom:4px;
}

.sub{
  color:#d5f5e3;
  text-align:center;
  font-size:14px;
  margin-bottom:10px;
}

.board{
  position:relative;
  width:100%;
  aspect-ratio:1/1;
  background:#fff;
  border-radius:12px;
  display:grid;
  grid-template-columns:repeat(10,1fr);
  grid-template-rows:repeat(10,1fr);
  overflow:hidden;
}

.cell{
  border:1px solid #ddd;
  font-size:10px;
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  padding:2px;
}

.pawn{
  width:14px;
  height:14px;
  border-radius:50%;
  position:absolute;
  transition:all .35s cubic-bezier(.25,.8,.25,1);
  z-index:5;
}

.p1{ background:red; }
.p2{ background:blue; }

.snake, .ladder{
  position:absolute;
  pointer-events:none;
  opacity:.85;
}

.controls{
  margin-top:12px;
  text-align:center;
}

.dice{
  width:50px;
  height:50px;
  background:white;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  margin:0 auto 8px;
  transition:transform .4s;
}

.roll{
  background:#f1c40f;
  border:none;
  padding:10px;
  width:100%;
  border-radius:12px;
  font-weight:bold;
  font-size:16px;
}

.info{
  margin-top:8px;
  color:white;
  text-align:center;
}

.toggle{
  margin-top:8px;
  font-size:14px;
  color:white;
}
</style>
</head>

<body>
<div class="container">
<h1>ðŸŽ² Ular Tangga</h1>
<div class="sub">2 Pemain â€¢ Langsung Main</div>

<div class="board" id="board"></div>

<!-- Ular & Tangga -->
<img class="ladder" src="https://i.imgur.com/0Q9ZQZJ.png" style="left:30%;top:55%;width:20%;transform:rotate(-20deg)">
<img class="snake" src="https://i.imgur.com/Z3ZK5Jf.png" style="left:50%;top:10%;width:30%">

<div class="controls">
<div class="dice" id="dice">ðŸŽ²</div>
<button class="roll" onclick="rollDice()">Roll Dadu</button>
<div class="info" id="info">Giliran: Pemain 1</div>
<div class="toggle">
<label><input type="checkbox" checked onchange="soundOn=this.checked"> Sound</label>
</div>
</div>
</div>

<!-- SOUND -->
<audio id="sndDice" src="https://cdn.pixabay.com/audio/2022/03/15/audio_9e8c9bb2b0.mp3"></audio>
<audio id="sndUp" src="https://cdn.pixabay.com/audio/2022/10/30/audio_71d2b7c72d.mp3"></audio>
<audio id="sndDown" src="https://cdn.pixabay.com/audio/2022/03/10/audio_9a3c7b58f3.mp3"></audio>
<audio id="sndWin" src="https://cdn.pixabay.com/audio/2022/03/23/audio_46c40c6d47.mp3"></audio>

<script>
const board=document.getElementById("board");
const info=document.getElementById("info");
const diceEl=document.getElementById("dice");

let soundOn=true;
let turn=0;
let pos=[0,0];

const snakes={17:7,54:34};
const ladders={3:22,20:38};

for(let i=100;i>=1;i--){
  const c=document.createElement("div");
  c.className="cell";
  c.textContent=i;
  board.appendChild(c);
}

const pawns=[
  createPawn("p1"),
  createPawn("p2")
];

function createPawn(cls){
  const p=document.createElement("div");
  p.className="pawn "+cls;
  board.appendChild(p);
  return p;
}

function play(id){
  if(soundOn) document.getElementById(id).play();
}

function rollDice(){
  const d=Math.floor(Math.random()*6)+1;
  diceEl.style.transform="rotate(360deg)";
  setTimeout(()=>diceEl.style.transform="rotate(0deg)",400);
  diceEl.textContent=d;
  play("sndDice");
  movePawn(d);
}

async function movePawn(step){
  for(let i=0;i<step;i++){
    pos[turn]++;
    updatePawn();
    await sleep(300);
  }

  if(ladders[pos[turn]]){
    play("sndUp");
    pos[turn]=ladders[pos[turn]];
    updatePawn(true);
  }

  if(snakes[pos[turn]]){
    play("sndDown");
    pos[turn]=snakes[pos[turn]];
    updatePawn(true);
  }

  if(pos[turn]>=100){
    play("sndWin");
    alert("Pemain "+(turn+1)+" MENANG!");
    location.reload();
  }

  turn=1-turn;
  info.textContent="Giliran: Pemain "+(turn+1);
}

function updatePawn(jump=false){
  const p=pawns[turn];
  const n=pos[turn]-1;
  const row=Math.floor(n/10);
  const col=n%10;
  p.style.left=(col*10+1)+"%";
  p.style.top=((9-row)*10+1)+"%";
  if(jump){
    p.style.transform="scale(1.4)";
    setTimeout(()=>p.style.transform="scale(1)",300);
  }
}

function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
</script>
</body>
</html>
